## 目标
- 为资产类型为“股票”或“基金”的资产提供详情页，展示基础信息
- 在详情页管理该资产下的持仓条目：支持新增、编辑、删除多条（名称、价格、数量、备注）
- 显示持仓总价值（Σ price × quantity），与基础信息一起呈现

## 数据模型（Prisma 扩展）
- 新增 `AssetHolding` 表：
  - 字段：`id`、`assetId`、`name`、`price(Decimal 18,4)`、`quantity(Decimal 18,4)`、`notes?`、`createdAt`、`updatedAt`
  - 关系：`assetId → Asset(id)`；索引 `(assetId)`
- 约束：仅当 `Asset.type.code ∈ { 'stock', 'fund' }` 才展示与使用该持仓模块（服务端仍允许写入，但前端仅在上述类型显示入口）

## API 设计
- `GET /api/assets/:id`：返回资产基础信息（已有）
- `GET /api/assets/:id/holdings`：列出该资产的持仓条目（分页可后续加）
- `POST /api/assets/:id/holdings`：新增持仓（登录校验 + Zod 校验）
- `PUT /api/asset-holdings/:holdingId`：更新持仓（登录 + Zod）
- `DELETE /api/asset-holdings/:holdingId`：删除持仓（登录）
- 校验（Zod）：
  - `HoldingCreateSchema`：`name:string(min1)`，`price:number(>0)`，`quantity:number(>0)`，`notes?:string`
  - `HoldingUpdateSchema`：同上

## 前端页面与交互
- 新增页面：`app/assets/[id]/page.tsx`
  - 页面结构：
    - 基础信息卡片：名称、类型、币种、估值日期、基础金额（资产表的 amount）
    - 持仓管理卡片：
      - 顶部表单（名称、价格、数量、备注）+ “添加”按钮
      - 下方持仓表格：列（名称、价格、数量、小计、备注、操作）
      - 操作列：编辑（弹窗）/删除（确认弹窗）
      - 顶部或底部显示“持仓总价值”（Σ price × quantity）
  - 仅当资产类型为“股票/基金”显示持仓卡片；其它类型显示提示文案（无持仓模块）
- 组件复用：使用现有 `Card/Button/Input/Select/Modal/Alert` 与 Tailwind 样式
- 交互规范：
  - 字段级错误提示（Zod 返回的 fieldErrors）
  - 顶部 Alert 成功/失败反馈；提交中禁用按钮
  - 删除操作二次确认

## 导航与入口
- 在资产列表表格中为每条资产名称添加链接到详情页 `/assets/[id]`
- 详情页返回按钮（或面包屑）返回资产列表

## 安全与校验
- `POST/PUT/DELETE` 接口统一使用登录校验（Cookie），未登录返回 401
- `price/quantity` 使用 Decimal 存储，前端以 `number` 录入，服务端转换与校验
- 服务端对非“股票/基金”资产的持仓写操作不做强制拒绝（避免后续扩展限制），前端控制显示

## 性能与工程
- 列表默认一次性加载全部持仓（数量通常有限），如持仓过多可后续加分页与搜索
- 计算总价值在前端完成（也可后端返回聚合值，后续扩展）

## 实施步骤
1. 扩展 Prisma 模型：新增 `AssetHolding`，生成与推送迁移
2. 实现接口：`GET/POST /api/assets/:id/holdings`、`PUT/DELETE /api/asset-holdings/:id`；加入 Zod 校验与登录校验
3. 新建详情页 `app/assets/[id]/page.tsx`：基础信息卡片与持仓管理卡片；表单与表格、编辑/删除弹窗
4. 资产列表为名称添加链接入口；统一样式与反馈
5. 本地与 Render 验证新增/编辑/删除流程与总价值计算

## 验收标准
- 股票/基金资产详情页能正确展示基础信息与持仓列表
- 支持持仓新增、编辑、删除，错误提示明确、交互统一
- 持仓总价值计算正确；未登录写操作被阻止并提示登录

如确认，我将开始实现上述数据模型扩展、接口与详情页。