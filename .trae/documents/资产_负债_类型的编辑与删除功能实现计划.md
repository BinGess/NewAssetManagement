## 目标

* 在资产管理、负债管理、类型管理三页提供完整的新增/编辑/删除功能
* 保持简约风样式与统一交互，含校验、加载、错误/成功反馈、删除确认
* 增强服务端安全：对写操作统一登录校验与输入校验

## 服务端改造

* 统一写操作登录校验
  * 在 `PUT/DELETE` 接口引入登录校验（`requireAuth`），与现有 `POST` 一致
* 输入校验
  * 新增 `AssetUpdateSchema`、`LiabilityUpdateSchema`、`TypeCreate/UpdateSchema`，在 `POST/PUT` 路由使用 Zod 校验
* 错误响应规范
  * 统一返回 `400 { errors }` 用于字段错误；`401` 未登录；`404/500` 对应资源不存在或异常

## 前端组件

* `Modal`：通用弹窗，支持标题、内容、底部按钮（确定/取消）
* `Confirm`：删除确认弹窗，显示提示文案与二次确认
* `IconButton`：窄按钮用于行内操作（编辑/删除）
* 复用现有 `Button/Input/Select/Card/Alert` 统一样式

## 页面改造

* 资产/负债列表页
  * 表格新增“操作”列：编辑、删除按钮
  * 编辑：打开 `Modal`，表单预填原数据，提交 `PUT /api/.../:id`；成功后刷新列表与顶部提示
  * 删除：点击删除打开 `Confirm`，确认后请求 `DELETE /api/.../:id`；成功后刷新与提示
  * 登录校验：写操作失败 401 时统一提示并提供登录链接
* 类型管理页
  * 列表每行新增编辑与删除
  * 编辑：支持修改 `label` 与 `enabled`（如需）；提交 `PUT /api/*-types/:id`
  * 删除：`DELETE /api/*-types/:id`；若被引用可返回 400 并提示不可删除（后续可加引用检查）

## 交互与可用性

* 表单字段级错误：显示于输入框下方；顶部 `Alert` 展示全局错误或成功
* 删除确认：要求用户二次确认避免误删
* 加载态：按钮在提交中仅禁用，不影响整体页面操作

## 验证与测试

* 本地前端直连 Render 数据库（External Connection String）进行快速验证
* 资产/负债/类型三页分别验证新增、编辑、删除与错误提示
* 验证未登录写操作返回 401 提示

## 实施步骤

1. 服务端：在 `PUT/DELETE` 路由加入 `requireAuth`；补充 Zod Update 校验与错误响应
2. 新建前端 `Modal/Confirm/IconButton` 组件，接入统一样式
3. 资产/负债页：加入操作列与编辑/删除流程；统一反馈与刷新
4. 类型页：加入操作列与编辑/删除流程
5. 自测与修正细节；补充 README 的使用说明

## 验收标准

* 三页均可完成新增/编辑/删除，校验与提示完整
* 未登录写操作被阻止并提示登录
* 视觉与交互保持简约统一，无内联样式、错误提示明确