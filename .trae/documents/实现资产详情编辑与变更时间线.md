## 实施目标
- 在资产详情页支持编辑/删除资产（弹窗与确认），提交后自动记录金额变更日志
- 新增“资产变更详情”时间线：展示时间点、变更前后金额与差值（含备注与正负颜色区分）

## 数据模型
- 扩展 Prisma：新增 `AssetChange` 模型
  - 字段：`id, assetId, beforeAmount, afterAmount, diff, at, notes?, createdAt, updatedAt`
  - 关系：`assetId` → `Asset(id)`；索引 `@@index([assetId, at])`

## 服务端接口
- 资产编辑/删除（已有基础）：
  - `PUT /api/assets/:id`：编辑资产；读取更新前资产，若 `amount` 变化则写入 `AssetChange`（`diff = after - before`）
  - `DELETE /api/assets/:id`：删除资产（确认后执行），前端成功后跳转至 `/assets`
- 变更时间线：
  - `GET /api/assets/:id/changes`：返回该资产的变更日志（倒序）
  - 可选 `POST /api/assets/:id/changes`：手工记录一条变更（`beforeAmount/afterAmount/notes`），登录 + Zod 校验
- 校验：新增 `AssetChangeCreateSchema`（Zod）
- 安全：所有写操作统一登录校验（Cookie），未登录返回 401

## 前端实现
- 详情页：`app/assets/[id]/page.tsx`
  - 头部操作区：添加“编辑”与“删除”按钮
    - 编辑弹窗：名称、类型、基础金额、币种、估值日期、备注；调用 `PUT /api/assets/:id`
    - 删除弹窗：确认后调用 `DELETE /api/assets/:id`；成功后 `window.location.href = '/assets'`
  - 资产变更详情卡片：时间线列表
    - 拉取 `GET /api/assets/:id/changes`
    - 展示 `at`、`before → after`、`diff`（`>0` 绿色、`<0` 红色）、`notes`
    - 可选：表单新增一条变更（手工修正），调用 `POST /api/assets/:id/changes`
- 样式：复用 `Card/Button/Input/Modal/Alert` 与 Tailwind 类；新增时间线简约样式（左圆点+竖线）

## 文件改动清单
- `prisma/schema.prisma`：新增 `AssetChange`
- `lib/schemas.ts`：新增 `AssetChangeCreateSchema`
- `app/api/assets/[id]/route.ts`：在 `PUT` 中写入变更日志；保留 `GET/DELETE`
- `app/api/assets/[id]/changes/route.ts`：实现 `GET/POST`
- `app/assets/[id]/page.tsx`：添加编辑/删除弹窗与时间线渲染

## 验证
- 本地前端直连数据库或在 Render 上：
  - 编辑资产金额 → 时间线出现一条变更
  - 删除资产 → 返回列表
  - 未登录写操作提示登录；字段错误有明确提示

## 交付标准
- 资产详情页具备编辑/删除与变更时间线；交互统一简约风，校验与错误提示完整