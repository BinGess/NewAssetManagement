## 目标
- 在导航栏“负债”后新增“固定支出”入口（/expenses），可添加、查看、编辑、删除固定支出项
- 支出项属性：名称、金额、周期、所属人、日期、备注（备注可选）
- 点击列表项进入详情页，展示基础信息并支持编辑/删除
- 在类型管理新增“所属人”管理（默认值：白斌、依依），用于在支出项中选择

## 数据模型（Prisma）
- Person（所属人）
  - `id`，`name`（唯一），`enabled`（默认 true），`createdAt/updatedAt`
- Expense（固定支出）
  - `id`，`name`，`amount`（Decimal 18,2），`cycle`（枚举：`daily|weekly|monthly|yearly`），`personId`，`date`（DateTime），`notes?`，`createdAt/updatedAt`
  - 关系：`personId → Person(id)`；索引 `personId` & `date`
- 预置数据：`Person` 种子脚本插入“白斌”“依依”并启用

## API 设计
- Person（所属人）
  - `GET /api/persons`：列表；`POST /api/persons`：新增
  - `PUT/DELETE /api/persons/:id`：编辑/删除（删除需考虑与 Expense 关联；默认阻止删除被引用项并返回 400）
- Expense（固定支出）
  - `GET /api/expenses`：列表（支持按日期/所属人筛选，后续可加）
  - `POST /api/expenses`：新增
  - `GET /api/expenses/:id`：详情；`PUT/DELETE /api/expenses/:id`：编辑/删除
- 安全与校验：
  - 写操作统一登录校验（Cookie）；未登录返回 401
  - Zod 校验：
    - `ExpenseCreateSchema/ExpenseUpdateSchema`：`name(min1)`、`amount(>0)`、`cycle(enum)`、`personId(int)`、`date(date)`、`notes?`
    - `PersonCreateSchema/PersonUpdateSchema`：`name(min1)`、`enabled?`

## 前端页面
- 导航：在 `/app/layout.tsx` 的导航中“负债”后添加“固定支出”链接
- 固定支出列表页：`/expenses`
  - 顶部卡片内表单：名称、金额、周期（下拉：每日/每周/每月/每年）、所属人（从 `/api/persons` 获取）、日期、备注；提交按钮
  - 下方表格：列（名称、周期、金额、所属人、日期、备注、操作）；支持排序（名称/周期/金额/日期）与箭头指示；金额使用友好格式（万/亿）
  - 操作列：编辑（弹窗表单）/删除（确认弹窗）
- 固定支出详情页：`/expenses/[id]`
  - 基础信息卡片：名称、周期、金额、所属人、日期、备注
  - 操作区：编辑/删除按钮与弹窗（一致交互）
- 类型管理页扩展：`/types`
  - 新增“所属人”管理卡片（列表 + 顶部新增表单），支持编辑/删除，与资产/负债类型并列展示
- 样式：沿用简约风组件（Card/Button/Input/Select/Modal/Alert），金额显示使用 `formatAmount`；排序持久化到 `localStorage`（键名 `expenses_sort`）

## 交互与校验
- 字段级错误：在输入框下方展示 Zod fieldErrors；顶部 Alert 展示全局错误与成功
- 登录校验：401 时统一提示并提供“登录”链接
- 删除确认：弹窗二次确认；若所属人被引用，删除返回 400 并提示“存在关联支出，不可删除”

## 实施步骤
1. Prisma 模型与迁移：新增 `Person` 与 `Expense`，生成并推送迁移；种子脚本初始化“白斌”“依依”
2. API 路由：实现 `GET/POST/PUT/DELETE`（`/api/persons`、`/api/expenses`、`/api/expenses/:id`）；加入 Zod 校验与登录校验
3. 导航更新：在 `layout` 导航加入“固定支出”链接
4. 前端页面：`/expenses` 列表与新增、编辑/删除弹窗；`/expenses/[id]` 详情页与编辑/删除；`/types` 增加“所属人”管理
5. 排序与持久化：列表页点击表头排序，持久化到 `localStorage`；金额显示统一使用 `formatAmount`
6. 自测与修正：本地前端直连数据库进行完整流程验证；Render 环境 smoke 测试登录校验与错误提示

## 验收标准
- “固定支出”可新增/编辑/删除，详情页可查看并编辑/删除
- “所属人”管理可新增/编辑/删除；默认“白斌”“依依”可用
- 列表可排序并持久化偏好；金额显示友好（万/亿）；未登录写操作被阻止并提示