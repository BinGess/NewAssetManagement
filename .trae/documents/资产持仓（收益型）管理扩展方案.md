## 功能目标
- 在资产详情页支持一类“收益型持仓”管理，允许手动录入：`名称、价格、数量、小计、购入时间、收益率`。
- 系统动态计算并仅在持仓列表中展示：`当天收入、本月收入、累计收入`。
- 与现有股票/基金持仓并存：股票/基金保留原有字段；收益型持仓显示扩展字段与收益列。

## 数据模型变更
- 扩展 `AssetHolding` 模型，新增字段（均面向收益型持仓）：
  - `subtotal` Decimal(18,2)：小计，手动输入（不强制与价格×数量一致）。
  - `purchaseDate` DateTime：购入时间，手动输入。
  - `yieldRate` Decimal(8,4)：年化收益率，手动输入（0.05 表示 5%）。
- 兼容性：
  - 以上字段对股票/基金可为空；UI仅在收益型场景显示并校验。

## 接口与校验
- 更新 `lib/schemas.ts`：
  - `HoldingCreateSchema`/`HoldingUpdateSchema` 增加可选字段：`subtotal、purchaseDate、yieldRate`（收益型场景在前端必填校验）。
- API：
  - `POST /api/assets/:id/holdings` 和 `PUT /api/asset-holdings/:id` 接收并保存上述新增字段。
  - `GET /api/assets/:id/holdings` 原样返回持仓；收入在前端计算，无需后端改动。
- 权限：沿用现有 `requireAuth` 机制。

## 前端改动（资产详情页）
- 文件：`app/assets/[id]/page.tsx`
- 表单：在“持仓管理”新增收益型输入项（仅在收益型模式显示）：
  - 输入：`小计、购入时间、收益率`（收益率支持输入 5 或 0.05，自动规范化为小数）。
- 列表列：在表格中新增并显示：`当天收入、本月收入、累计收入`（仅对有 `yieldRate` 与 `purchaseDate` 的记录显示，缺省显示 '-'）。
- 模式判定：
  - 保留现有 `stock/fund` 逻辑；新增“收益型持仓模式”开关：
    - 方案A：依据资产类型 `code`（新增类型如 `income`/`fixed_income` 显示收益型UI）。
    - 方案B：统一允许所有资产添加持仓；当持仓含 `yieldRate` 与 `purchaseDate` 时，表格自动显示收益列。
  - 建议采用方案B，减少类型依赖，提升灵活性。

## 收入计算规则
- 设 `r = yieldRate`（年化，示例：5% → 0.05），`S = subtotal`，持有天数 `D = max(0, floor((today - purchaseDate)/86400000))`。
- 当天收入：`S * r / 365`。
- 本月收入：`S * r / 12`。
- 累计收入：`S * r * D / 365`。
- 展示：均用现有 `formatAmount` 友好展示；无 `yieldRate/purchaseDate` 时显示 '-'。

## 校验与UX
- 表单校验：
  - `subtotal > 0`，`yieldRate ≥ 0`，`purchaseDate` 为有效日期。
  - 收益率输入容错：若输入 `≥1` 视为百分数，自动除以 100。
- 编辑/删除：沿用现有持仓弹窗；扩展编辑弹窗包含收益型字段。

## 迁移与兼容
- Prisma 迁移：为 `AssetHolding` 添加 3 字段，默认 `NULL` 以兼容历史数据。
- 现有股票/基金持仓不受影响；收益列仅对新增字段存在的记录显示。

## 验证与测试
- 用模拟数据添加收益型持仓，核对三种收入展示与随时间变化的累计收入。
- 回归测试股票/基金持仓新增、编辑、删除、列表小计与总价值计算。
- 前端：校验输入与展示格式；后端：zod 校验与API成功返回。

## 交互总结
- 用户在资产详情页持仓管理处可录入收益型字段；列表自动显示收入列。
- 不改动已有导航与资产结构；仅扩展持仓能力与展示。