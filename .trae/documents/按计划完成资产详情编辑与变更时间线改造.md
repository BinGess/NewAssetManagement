## 任务概览
- 在资产详情页新增资产本身的“编辑/删除”弹窗与功能
- 新增资产变更时间线：记录金额前后及差值，按时间倒序展示
- 写操作统一登录校验与 Zod 字段校验，样式沿用简约风

## 后端实现
- 数据模型新增：`AssetChange`
  - 字段：`id Int @id`, `assetId Int`, `beforeAmount Decimal(18,2)`, `afterAmount Decimal(18,2)`, `diff Decimal(18,2)`, `at DateTime @default(now())`, `notes String?`, `createdAt DateTime @default(now())`, `updatedAt DateTime @updatedAt`
  - 关系：`assetId` → `Asset(id)`；`@@index([assetId, at])`
- 接口扩展
  - `PUT /api/assets/:id`：编辑资产，读取旧值，若 `amount` 变化则写入 `AssetChange`（`diff=after-before`）
  - `DELETE /api/assets/:id`：保持删除逻辑
  - 变更时间线：
    - `GET /api/assets/:id/changes`：返回该资产的变更列表（倒序）
    - 可选：`POST /api/assets/:id/changes`：手工新增一条变更（Zod 校验）
- 校验
  - 新增 `AssetChangeCreateSchema`：`beforeAmount number`、`afterAmount number`、`notes? string`
  - 现有资产 `PUT` 的 Zod 校验保持不变（名称/类型/金额/币种/日期）
- 安全
  - `PUT/DELETE/POST` 走登录校验（Cookie）；`GET` 无需登录

## 前端实现
- 资产详情页 `app/assets/[id]/page.tsx`
  - 头部操作区：
    - “编辑”按钮 → 弹窗表单（名称、类型、金额、币种、估值日期、备注）→ 提交 `PUT /api/assets/:id` → 刷新详情与时间线
    - “删除”按钮 → 确认弹窗 → 提交 `DELETE /api/assets/:id` → 成功后跳转 `/assets`
  - 资产变更时间线卡片：
    - 拉取 `GET /api/assets/:id/changes`
    - 时间线项显示：时间点、`before → after`、`diff`（`>0` 绿色、`<0` 红色）、`notes`
    - 可选新增变更表单（手工补录），提交 `POST`
- 样式
  - 复用 `Card/Button/Input/Modal/Alert`；时间线为左侧圆点+竖线的简约列表

## 代码改动清单
- `prisma/schema.prisma`：新增 `AssetChange` 模型
- `lib/schemas.ts`：新增 `AssetChangeCreateSchema`
- `app/api/assets/[id]/route.ts`：在 `PUT` 写入变更日志；保留 `GET/DELETE`
- `app/api/assets/[id]/changes/route.ts`：新增 `GET/POST` 路由
- `app/assets/[id]/page.tsx`：
  - 添加资产“编辑/删除”弹窗与逻辑
  - 新增时间线卡片与渲染（含颜色与备注）

## 验证
- 登录后在资产详情页编辑金额 → 时间线出现新记录，`diff=after-before`，颜色正确
- 删除资产 → 页面跳转回列表
- 未登录写操作 → 顶部提示登录并链接到 `/login`

## 交付标准
- 资产详情页具备资产本身的编辑/删除与变更时间线展示
- 错误/成功提示明确、样式统一；接口与校验稳定